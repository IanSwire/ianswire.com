<!DOCTYPE html>
<html>
  <head>
      <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <h1>
    twitch.tv/ianswire
  </h1>
  <body>
    <!-- Add a placeholder for the Twitch embed -->
    <div id="twitch_embed">
      <div id="stream_embed"></div>
      <div id="chat_embed">
          <iframe frameborder="0"
            scrolling="no"
            id="chat_embed"
            src="https://www.twitch.tv/embed/ianswire/chat"
            height="500"
            width="350">
          </iframe>
      </div>
    </div>
    <div id="hidden_embed"></div>
    <!-- Load the Twitch embed script -->
    <script src="https://embed.twitch.tv/embed/v1.js"></script>

    <!--
      Create a Twitch.Embed object that will render
      within the "twitch-embed" root element.
    -->
    <script type="text/javascript">
      var embed = new Twitch.Embed("stream_embed", {
        width: 854,
        height: 480,
        channel: "ianswire",
        layout: "video",
        autoplay: true
      });

      var hidden_embed = new Twitch.Embed("hidden_embed", {
        width: 1,
        height: 1,
        channel: "ianswire",
        layout: "video",
        autoplay: true
      });

      embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
        var player = embed.getPlayer();
        player.SetVolume(0.3);
        player.play();
      });

      hidden_embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
        var player = hidden_embed.getPlayer();
        player.SetVolume(0.05);
        player.play();
      });
    </script>
  </body>
</html>
